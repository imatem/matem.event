<tal:manager replace="structure provider:collage.ContentManager" />

<tal:variables define="plone_view here/@@plone;
                       toLocalizedTime nocall: plone_view/toLocalizedTime;
                       isAnon view/isAnon;
                       mtool view/mtool;
                       portal_url view/portal_url;
                       normalizeString view/normalizeString;
                       site_properties view/site_properties">

  <div class="standard-topic"
       tal:define="topicContents view/getContents"
       tal:condition="topicContents">

    <tal:listing i18n:domain="plone"
                 define="view context/@@collage_kss_helper/getKssView;
                         getKssClasses python: view.getKssClasses;
                         templateId string:folder_summary_view;
                         folderContents topicContents;">

      <!-- <metal:listing-macro use-macro="here/folder_listing/macros/listing" /> -->
      <dl>
        <tal:entry tal:repeat="item folderContents" metal:define-macro="entries">
          <div class="tileItem">
            <tal:block tal:define="item_url item/getURL|item/absolute_url;
                                item_title_or_id item/pretty_title_or_id;
                                item_description item/Description;
                                item_type item/portal_type;
                                item_type_class python:'contenttype-' + normalizeString(item_type);
                                item_wf_state item/review_state|python: context.portal_workflow.getInfoFor(item, 'review_state', '');
                                ploneview context/@@plone;
                                item_icon python:ploneview.getIcon(item);
                                item_ponente nothing;
                                item_date item/start/pCommon|nothing;
                                item_location item/location|nothing;
                                item_start item/start|item/StartDate|nothing;
                                item_type_title item/getRemoteUrl;
                                item_subjects item/Subject|None;
                                item_subject python: item_subjects and item_subjects[0] or None;
                                item_seminary item_subject;
                                item_expositor item/getSpeaker|nothing">
              <metal:block>
                <dt metal:define-macro="listitem">
                  <span class="summary">
                    <img tal:replace="structure item_icon/html_tag" />
                    <a href="#" tal:content="item_title_or_id" tal:attributes="href item_url">Title</a>
                    <br/>
                    <span tal:content="item_expositor"/>
                  </span>  
                </dt>
                <dd>
                  <span tal:content="item_description"/><br/>
                  <span tal:content="item/start"/><br/>
                  <span tal:content="python:item_date.replace('2013', '')+'.'"/>
                  <span tal:condition="item_location">
                    <span tal:content="python:item_location+'.'"/>
                  </span>
                  <br/>
                  <span tal:content="item_seminary"/>

                    <!-- <span><i>Fulanito de tal.</i></span> -->
                        <!-- <span>Instituto de Matemáticas, UNAM</span><br/> -->
                        <!-- <span tal:content="python:toLocalizedTime(item_start)"/> -->
                        <!-- <span tal:content="item_type"/><br/> -->
                        <!-- <small>Seminario J.J. Charatonik de Teoría de los Continuos</small><br> -->
                        
                </dd>
            </metal:block>


          </tal:block>
        </div>
        </tal:entry>


      </dl>





    </tal:listing>

    <a tal:attributes="href here/absolute_url"
       tal:condition="python:len(topicContents) ==  here.itemCount"
       i18n:domain="plone" i18n:translate="box_morelink">More...</a>

  </div>

</tal:variables>

